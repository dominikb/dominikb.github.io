{"componentChunkName":"component---src-templates-tag-js","path":"/tags/gitlab/","result":{"data":{"site":{"siteMetadata":{"title":"Dominik Bauernfeind","author":"Dominik Bauernfeind","labels":[{"tag":"laravel","tech":"Laravel","name":"DiLaravel","size":20,"color":"#ff2c1f"},{"tag":"php","tech":"PHP","name":"DiPhp","size":20,"color":"#8892bf"},{"tag":"gitlab","tech":"Gitlab","name":"FaGitlab","size":20,"color":"#fc6d25"},{"tag":"cicd","tech":"CI/CD","name":"DiTerminal","size":20,"color":null},{"tag":"ruby","tech":"Ruby","name":"DiRuby","size":20,"color":"#aa1401"},{"tag":"rails","tech":"Rails","name":"SiRubyonrails","size":20,"color":"#d30001"},{"tag":"java","tech":"Java","name":"FaJava","size":20,"color":"#df0000"},{"tag":"spring","tech":"Spring","name":"SiSpring","size":20,"color":"#6db33f"},{"tag":"spring-boot","tech":"Spring Boot","name":"SiSpringboot","size":20,"color":"#6db33f"}]}},"allMarkdownRemark":{"totalCount":2,"edges":[{"node":{"excerpt":"Connecting to a different server from your CI job can be a hassle. Specifying the ssh connection parameters followed by the command to be executed can take quite a lot of space visually and cause all…","html":"<p>Connecting to a different server from your CI job can be a hassle. Specifying the ssh connection parameters followed by the command to be executed can take quite a lot of space visually and cause all kinds of trouble with linebreaks if you want to space out your command over multiple lines.</p>\n<p>A better way is to create an ssh configuration on your Runner and simplify this especially if you need to connect to the target server multiple times.\nLet me show you my solution and how it came about.</p>\n<h2>Connecting to a remote server</h2>\n<p>First up, you need to make all parameters available inside the job, for example by using the Gitlab CI parameters.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 1000px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b5b00beedce63ef1e02899befd94c5cc/e8649/gitlab-ci-variables.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.8%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAACtElEQVR42mWSW08TQRTH99EP4ANQKI3RCiSUUrFSuQhtoUlJjInfRhOXN332C8gjkBhefCYxUV7QptykIbbS225t99Jtd3d2Z3fnODNSIniSX8/ZmTn/+Z/uComZe68WUonNlZXlN6mnT8TJqagYjoyK45ExMTweumYsHBJHQkPi8MiQODI6zAlRwuOjYvTh/c1IJPyanrkrLM2vw8LiC5hPPYe5x3mYTeQgHl+DiYlleBBdhCiF5cmpZ3RvHR7Nsf0sxGfXYDqWpmRgafklJFN5CIdjCeHLfqH/9eDUPzy8cI+OLvHBwSne/3yCi8VLfFT8hdka4+S4ikulJr64kHHpvMnr8/MGLhTK+Hvhp1c8rqB3b9/PCIahoyDAAEAI++n3DSK3ZKJqKtG6Gs0K0XSNPyuqQhSlw9faNNsI8R7gEXh7ex/jgizLyDQtsCyL+H4AqK+DqctgtKvQlcsc/QqjVYGOXAdVqkBPa4HV06gM5k4sy/a2t7fjQqvVQrZtA8YuoQEedgA7FgQY0UsxeLQmHq0Jq01wkQWea4Nr9//ukYA7RAh5Ozs7caHT6SDXdakg5oIYe9Cnjo1ej9cuBSEHAtrnM+gUDJuuMXzfvykoyxJyHOda0PM8Nj50u112iDWA6zLBANg+4TkAl/b49LLgtmCjISEmQMe+cohZDaZpchF2AZtgIMgyu8S0LZC034Bc56ZgqVSxFUVhjgJmnzaQQb56g5xBBBTfxaSuyuTDt0+kY+oBE6QmMBWcEarVGtZ1jTtiYRgGNJtNPjJzxv4OBnN6m3+Dmgh2d3fjwtnZD71cLruNRsNWVRVJkoRqtRqq1+ucQd1ut/+DvVDaw/oc+vn1tra2poVsNptYXV19kk6nkzQnc7lccmNjI5nP529AzyUzmQzPAwY9NLP+RCwWu/MHJVMu8dJbSYgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Variables configured in Gitlab CI\"\n        title=\"Variables configured in Gitlab CI\"\n        src=\"/static/b5b00beedce63ef1e02899befd94c5cc/00d43/gitlab-ci-variables.png\"\n        srcset=\"/static/b5b00beedce63ef1e02899befd94c5cc/63868/gitlab-ci-variables.png 250w,\n/static/b5b00beedce63ef1e02899befd94c5cc/0b533/gitlab-ci-variables.png 500w,\n/static/b5b00beedce63ef1e02899befd94c5cc/00d43/gitlab-ci-variables.png 1000w,\n/static/b5b00beedce63ef1e02899befd94c5cc/aa440/gitlab-ci-variables.png 1500w,\n/static/b5b00beedce63ef1e02899befd94c5cc/e8950/gitlab-ci-variables.png 2000w,\n/static/b5b00beedce63ef1e02899befd94c5cc/e8649/gitlab-ci-variables.png 2968w\"\n        sizes=\"(max-width: 1000px) 100vw, 1000px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>You can now connect to an external server using the provided credentials:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># .gitlab.ci.yml</span>\n\nDeploy:\n  script:\n    - <span class=\"token string\">\"ssh <span class=\"token variable\">${DEPLOY_SSH_SERVER}</span> -l <span class=\"token variable\">${DEPLOY_SSH_USER}</span> -p <span class=\"token variable\">${DEPLOY_SSH_PORT}</span> -i <span class=\"token variable\">${DEPLOY_SSH_PRIVATE_KEY}</span> 'ls -la <span class=\"token environment constant\">$HOME</span>'\"</span></code></pre></div>\n<p>But specifying those ssh parameters for every command is tedious. There is a better way.</p>\n<h2>Creating an ssh configuration</h2>\n<p>Running one-off commands using the parameterized ssh command is fine. Problems occurred for me when I needed to connect to multiple times or to multiple different servers.</p>\n<p>Always parameterizing the ssh command creates a lot of visual noise and makes it harder to understand what the given line is actually supposed to do.</p>\n<p>Try to scan this script and figure out what happens here:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">Deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span> \n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"scp -P ${DEPLOY_SSH_PORT} -i ${DEPLOY_SSH_PRIVATE_KEY} -r artifacts ${DEPLOY_SSH_USER}@${DEPLOY_SSH_SERVER}:/opt/deploy_artifacts\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh -p ${DEPLOY_SSH_PORT} -i ${DEPLOY_SSH_PRIVATE_KEY} ${DEPLOY_SSH_USER}@${DEPLOY_SSH_SERVER} 'systemctl stop my-application'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh -p ${DB_SSH_PORT} -i ${DB_SSH_PRIVATE_KEY} ${DB_SSH_USER}@${DB_SSH_SERVER} 'mysqldump --all-databases > backup.sql'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh -p ${DEPLOY_SSH_PORT} -i ${DEPLOY_SSH_PRIVATE_KEY} ${DEPLOY_SSH_USER}@${DEPLOY_SSH_SERVER} 'systemctl start my-application'\"</span></code></pre></div>\n<p>Now again with a cleaner version where we separate configuration and workload:</p>\n<div class=\"gatsby-highlight\" data-language=\"yml\"><pre class=\"language-yml\"><code class=\"language-yml\"><span class=\"token key atrule\">Deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"./ci/setup_ssh_configuration deploy_server ${DEPLOY_SSH_SERVER} ${DEPLOY_SSH_PORT} ${DEPLOY_SSH_USER} ${DEPLOY_SSH_PRIVATE_KEY}\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"./ci/setup_ssh_configuration db_server ${DB_SSH_SERVER} ${DB_SSH_PORT} ${DB_SSH_USER} ${DB_SSH_PRIVATE_KEY}\"</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"scp -r artifacts deploy_server:/opt/deploy_artifacts\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh deploy_server    'systemctl stop my-application'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh db_server        'mysqldump --all-databases > backup.sql'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh deploy_server    'systemctl start my-application'\"</span></code></pre></div>\n<p>By using a <code class=\"language-text\">before_script</code> we create a clear visual distinction between the configuration setup and the work that is actually done.</p>\n<p><strong>./ci/setup_ssh_configuration.sh</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n\n<span class=\"token builtin class-name\">set</span> -euo pipefail\n\n<span class=\"token function\">mkdir</span> -p ~/.ssh\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span>\"\nHost <span class=\"token variable\">${1}</span>\n    Target <span class=\"token variable\">${2}</span>\n    Port <span class=\"token variable\">${3}</span>\n    User <span class=\"token variable\">${4}</span>\n    IdentifyFile <span class=\"token variable\">${5}</span>\n<span class=\"token string\">\"\"</span>\" <span class=\"token operator\">>></span> <span class=\"token string\">\"~/.ssh/config\"</span></code></pre></div>\n<h3>Even shorter configuration</h3>\n<p>The <code class=\"language-text\">before_script</code> can be even shorter if we accept a naming convention for those SSH connection parameters:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># {PREFIX}_SSH_SERVER {PREFIX}_SSH_USER ...</span></code></pre></div>\n<p>With some edits in our <code class=\"language-text\">setup_ssh_configuration</code> script we can reduce the <code class=\"language-text\">yml</code> config to this:</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># .gitlab.ci.yml</span>\n\n<span class=\"token key atrule\">Deploy</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">before_script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"./ci/setup_ssh_configuration deploy_server DEPLOY\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"./ci/setup_ssh_configuration db_server DB\"</span>\n  <span class=\"token key atrule\">script</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"scp -r artifacts deploy_server:/opt/deploy_artifacts\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh deploy_server    'systemctl stop my-application'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh db_server        'mysqldump --all-databases > backup.sql'\"</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"ssh deploy_server    'systemctl start my-application'\"</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n<span class=\"token comment\"># ./ci/setup\\_ssh\\_configuration.sh</span>\n\n<span class=\"token builtin class-name\">set</span> -euo pipefail\n\n<span class=\"token function\">mkdir</span> -p ~/.ssh\n\n<span class=\"token assign-left variable\">target</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_HOST\"</span>\n<span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_PORT\"</span>\n<span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_USER\"</span>\n<span class=\"token assign-left variable\">keypath</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_PRIVATE_KEY\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span>\"\nHost <span class=\"token variable\">${1}</span>\n    Target <span class=\"token variable\">${<span class=\"token operator\">!</span>target}</span>\n    Port <span class=\"token variable\">${<span class=\"token operator\">!</span>port}</span>\n    User <span class=\"token variable\">${<span class=\"token operator\">!</span>user}</span>\n    IdentifyFile <span class=\"token variable\">${<span class=\"token operator\">!</span>keypath}</span>\n<span class=\"token string\">\"\"</span>\" <span class=\"token operator\">>></span> <span class=\"token string\">\"~/.ssh/config\"</span></code></pre></div>\n<h2>Reusing connections</h2>\n<p>One more improvement that can be made is to reuse the ssh connections.</p>\n<p>Depending on your CI-Setup you could have multiple scripts that connect to the same host within the same pipeline stage. Now, if your executed commands are all sub-second, the overhead of creating a new ssh session each time can be relatively large.</p>\n<p>You can improve upon this by once more extending the <code class=\"language-text\">setup_ssh_configuration.sh</code> to add the configuration for reusing previous TCP connections to the same host:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token shebang important\">#!/usr/bin/env bash</span>\n<span class=\"token comment\"># ./ci/setup\\_ssh\\setup_ssh_configuration.sh</span>\n\n<span class=\"token builtin class-name\">set</span> -euo pipefail\n\n<span class=\"token function\">mkdir</span> -p ~/.ssh/sockets\n\n<span class=\"token assign-left variable\">target</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_HOST\"</span>\n<span class=\"token assign-left variable\">port</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_PORT\"</span>\n<span class=\"token assign-left variable\">user</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_USER\"</span>\n<span class=\"token assign-left variable\">keypath</span><span class=\"token operator\">=</span><span class=\"token string\">\"<span class=\"token variable\">${2}</span>_SSH_PRIVATE_KEY\"</span>\n\n<span class=\"token builtin class-name\">echo</span> <span class=\"token string\">\"\"</span>\"\nHost <span class=\"token variable\">${1}</span>\n    Target <span class=\"token variable\">${<span class=\"token operator\">!</span>target}</span>\n    Port <span class=\"token variable\">${<span class=\"token operator\">!</span>port}</span>\n    User <span class=\"token variable\">${<span class=\"token operator\">!</span>user}</span>\n    IdentifyFile <span class=\"token variable\">${<span class=\"token operator\">!</span>keypath}</span>\n    ControlMaster auto\n    ControlPath ~/.ssh/sockets/%r@%h-%p\n    ControlPersist <span class=\"token number\">600</span>\n<span class=\"token string\">\"\"</span>\" <span class=\"token operator\">>></span> <span class=\"token string\">\"~/.ssh/config\"</span></code></pre></div>\n<p>Read more about reusing connections for ssh <a href=\"https://puppet.com/blog/speed-up-ssh-by-reusing-connections\">https://puppet.com/blog/speed-up-ssh-by-reusing-connections</a></p>","id":"51478d69-8d4d-5756-a671-90aa392f10bf","frontmatter":{"title":"Painless SSH Setup in Gitlab CI","date":"October, 2020","tags":["gitlab","cicd","shell","ssh"],"excerpt":null},"fields":{"slug":"/2020-10-painless-ssh-setup-in-gitlab-ci/"}}},{"node":{"excerpt":"What is CI/CD? CI/CD is short for Continues Integration and Continues Delivery (sometimes also called Continues Deployment). Both terms group steps and actions that occur during the lifetime of your…","html":"<h2>What is CI/CD?</h2>\n<p>CI/CD is short for <strong>C</strong>ontinues <strong>I</strong>ntegration and <strong>C</strong>ontinues <strong>D</strong>elivery (sometimes also called <strong>C</strong>ontinues <strong>D</strong>eployment). Both terms group steps and actions that occur during the lifetime of your project. Red Hat has <a href=\"https://www.redhat.com/en/topics/devops/what-is-ci-cd\">a great article</a>, where all these acronyms are explained in a little more detail.</p>\n<p>I will go over my setup, mainly for CI jobs and tools, and give a short explainer, as well as some useful links to get you started with your own pipeline. For this post, I will spare the topic of automatic deployment.</p>\n<h2>What advantages do you gain?</h2>\n<p>The effects may vary depending on a variety of factors, but speaking from personal experience these are some areas you will benefit in:</p>\n<ul>\n<li>Keeping the code base organized</li>\n<li>Having consistent formatting throughout your codebase</li>\n<li>Giving (new) contributors some guidelines to follow when developing their feature</li>\n<li>Bringing value to your users faster</li>\n</ul>\n<h2>Code Functionality and Quality</h2>\n<p>Arguably the most important part of setting up a pipeline is getting set up with tests. Testing your application thoroughly will ensure that your business logic works the way it should.</p>\n<h3>Automated Testing</h3>\n<p>In order to get the most out of your tests, they should run on all of your supported PHP versions. Another criterion to test for is your third-party dependencies. When you require a package with <code class=\"language-text\">composer</code> , you can give it some version constraints. To ensure that we actually support the versions specified, we should run our tests multiple times with different <code class=\"language-text\">composer install</code> flags.</p>\n<h3>Travis CI (<a href=\"https://docs.travis-ci.com/user/languages/php/\">Link</a>)</h3>\n<p>Travis CI is easy to set up, free to use for open source projects and a somewhat standard tool in the PHP community for automatically running your tests.\nIt integrates nicely with Github and by following their <a href=\"https://docs.travis-ci.com/user/tutorial/\">setup instructions</a>, you are up and running in a matter of minutes. It’s also easily configured by putting a <em>.travis-ci.yml</em> file in your project.</p>\n<ul>\n<li><a href=\"https://github.com/laravel/framework/blob/5.8/.travis.yml\">Laravel Travis CI configuration</a></li>\n<li><a href=\"https://github.com/spatie/laravel-query-builder/blob/1.17.0/.travis.yml\">Spatie Package Travis CI configuration</a></li>\n</ul>\n<h3>Code Duplication</h3>\n<p>Given a growing codebase, it’s easy to forget that some code-snippet, that you’ve just introduced with your new feature, has already been used somewhere. The duplicated code will lead to a messy codebase and add maintenance cost to your project.</p>\n<h3>PHP Duplicate Code Detector (<a href=\"https://github.com/sebastianbergmann/phpcpd\">Github</a>)</h3>\n<p><a href=\"https://sebastian-bergmann.de/\">Sebastian Bergmann</a>, who created PHPUnit, also created a PHP CLI tool that automatically detects duplicate code.</p>\n<p>It may take some time to find a good balance of parameters for your project, but it is an easy win regarding clean code, that I can highly recommend.</p>\n<h3>Code Coverage</h3>\n<p>A metric that is often mentioned in regards to testing is “Code Coverage”. It describes, how much of your production code is covered when running your tests.</p>\n<p>Although the sound of saying “I have 100 percent code coverage” might be compelling to strive for high coverage, this alone does not guarantee, that your code is well tested and functional. More important than a high coverage is that code coverage allows you to track down paths in your application, that are not tested at all.</p>\n<h3>Scrutinizer CI (<a href=\"https://scrutinizer-ci.com/\">Website</a>)</h3>\n<p>Scrutinizer CI is a quite powerful tool, that offers lots of insights into your code. Besides running tests for code coverage, it also analyses the complexity of your code and brings up potential issues, that otherwise may go undiscovered.</p>\n<p>It’s free for open source projects and especially easy to set up for your Github projects by following the <a href=\"https://scrutinizer-ci.com/docs/guides/php/continuous-integration-deployment\">setup-up guide</a>.</p>\n<h2>Code Formatting</h2>\n<p>Consistent styling helps contributors and consumers of your code, to read and comprehend code more easily.</p>\n<p>Code formatting is a very opinionated topic and it’s borderline impossible to come to terms with everybody on how code should be formatted. (Spaces!)</p>\n<p>It’s best to define a set of styles you want to adhere to when developing a specific project right at the beginning. Generally, it is recommended to adhere to PSR-1 and PSR-2, but as long as you stick to a consistent style and enforce it in your whole project, you are good to go.</p>\n<p><strong>(PSR is short for PHP Standard Recommendation and is issued by the PHP-FIG. You can read more about them here.)</strong></p>\n<h3>Tools</h3>\n<p>Personally, I’ve been mainly using two tools for enforcing coding styles.</p>\n<h3>PHP CS Fixer (<a href=\"https://github.com/FriendsOfPHP/PHP-CS-Fixer\">Github Link</a>)</h3>\n<p>This is an open source project with highly customizable options. It can be run both locally and in a pipeline.</p>\n<p><a href=\"https://mlocati.github.io/php-cs-fixer-configurator/#version:2.16\">Mlocati’s PHP CS Fixer — Configurator</a> is a great addition to play around with all the possible options.</p>\n<ul>\n<li><a href=\"https://gist.github.com/dominikb/c06c426b2e1c0f55f3ac4fe04e6eabf5\">My personal PHP CS configuration</a></li>\n<li><a href=\"https://github.com/laravel/framework/blob/5.4/.php_cs\">Laravel PHP CS Configuration (up until 5.4)</a></li>\n</ul>\n<p>Adding custom scripts to your composer.json file makes it a breeze to quickly check if all your code is formatted correctly, or to let it be fixed automatically.</p>\n<h3>Style CI (Website)</h3>\n<p>Style CI is a tool that can be hooked into your repositories to automatically check for a given set of style rules on new pushes for a given branch. It offers additional functionality besides styling of PHP files, by also supporting Vue, CSS, JavaScript and more.</p>\n<p>It’s free for open source projects and can be easily configured with a <em>.styleci.yml</em> file in your repository.</p>\n<p>Check out their <a href=\"https://docs.styleci.io/\">documentation</a> to find out more.</p>\n<h2>Code Integrity</h2>\n<p>We use a lot of third-party code within our applications, that helps us do things more quickly, and that is fine. However, this could potentially expose us to security vulnerabilities.</p>\n<p>Another problem could be, that we do not always check thoroughly enough, how our dependencies are licensed.</p>\n<h3>SensioLabs Security Checker (<a href=\"https://github.com/sensiolabs/security-checker\">Github</a>)</h3>\n<p>Sensio Labs offers a tool that helps us to determine if we use dependencies with known security vulnerabilities. It reads from your <em>composer.lock</em> file and checks your dependencies and versions against their records.</p>\n<h3>Checking Licences</h3>\n<p>Composer comes with a pre-packed command that scans your dependencies and lists all of them with their associated licenses.</p>\n<p>Run <strong>composer licenses</strong> within your project to get a listing of your dependencies, their installed version, and their used license.</p>\n<p>I am currently working on a CLI tool that empowers the built-in composer command, adds additional information to used licenses and lets your pipeline fail when unwanted licenses were used within third-party dependencies. You can keep up with the development <a href=\"https://github.com/dominikb/composer-license-checker\">here</a>.</p>","id":"2bade56b-93dd-5fe5-898a-a3f9f21b44cc","frontmatter":{"title":"Getting started with CI/CD in PHP","date":"March, 2019","tags":["php","gitlab","cicd"],"excerpt":null},"fields":{"slug":"/2019-03-getting-started-with-ci-cd-in-php/"}}}]}},"pageContext":{"tag":"gitlab"}},"staticQueryHashes":["2212750296","2457483284","3019618709","63159454"]}